this.ws=this.ws||{},function(){var t=function(t){this.init(t)},i=t.prototype;i.isPoneReg=/^(([0+]d{2,3}-)?(0d{2,3})-)?(d{7,8})(-(d{3,}))?$/,i.isEmailReg=/^\w{3,}@\w+(\.\w+)+$/,i.isMobileReg=/^([0-9]{11})?$/,i.errorId=1,i.isSending=!1,i.init=function(t){this.$dom=t,this.$userName=$("#form_user_name"),this.$phone=$("#form_phone"),this.$email=$("#form_email"),this.$msg=$("#form_msg"),this.$resetBtn=$("#reset_btn"),this.$submitBtn=$("#submit_btn"),this.$errorTip=$("#contact .guestBook .error_tip"),this.$sendTip=$("#contact .guestBook .send_tip");var i=this;this.$errorTip.css("opacity",0),this.$sendTip.css("opacity",0),this.$errorTip.click(function(){i.errorTipDisappear(),1==i.errorId&&i.$userName.focus(),2==i.errorId&&i.$phone.focus(),3==i.errorId&&i.$email.focus(),4==i.errorId&&i.$msg.focus()}),this.$userName.data("defaultVal",this.$userName.val()),this.$userName.focus(function(){$(this).val()==$(this).data("defaultVal")&&$(this).val("")}),this.$userName.focusout(function(){$(this).val().length<=0&&$(this).val($(this).data("defaultVal"))}),this.$userName.click(function(){i.errorTipDisappear()}),this.$phone.data("defaultVal",this.$phone.val()),this.$phone.focus(function(){$(this).val()==$(this).data("defaultVal")&&$(this).val("")}),this.$phone.focusout(function(){$(this).val().length<=0&&$(this).val($(this).data("defaultVal"))}),this.$phone.click(function(){i.errorTipDisappear()}),this.$email.data("defaultVal",this.$email.val()),this.$email.focus(function(){$(this).val()==$(this).data("defaultVal")&&$(this).val("")}),this.$email.focusout(function(){$(this).val().length<=0&&$(this).val($(this).data("defaultVal"))}),this.$email.click(function(){i.errorTipDisappear()}),this.$msg.data("defaultVal",this.$msg.val()),this.$msg.focus(function(){$(this).val()==$(this).data("defaultVal")&&$(this).val("")}),this.$msg.focusout(function(){$(this).val().length<=0&&$(this).val($(this).data("defaultVal"))}),this.$msg.click(function(){i.errorTipDisappear()}),$(".btn").mouseenter(function(){$(this).css("backgroundColor","#9b0002")}),$(".btn").mouseleave(function(){$(this).css("backgroundColor","#000000")}),this.$resetBtn.click(function(){i.$userName.val(""),i.$phone.val(""),i.$email.val(""),i.$msg.val("")}),this.$submitBtn.click(function(){return i.isSending?void 0:$.trim(i.$userName.val()).length<=0||i.$userName.val()==i.$userName.data("defaultVal")?(i.$errorTip.css("lineHeight","23px"),TweenLite.to(i.$errorTip,.3,{opacity:.85,top:0,height:23,onStart:function(){i.$errorTip.css("display","inline")}}),i.$errorTip.text("请正确填写姓名"),void(i.errorId=1)):i.isMobileReg.test(i.$phone.val())&&i.$phone.val()!=i.$phone.data("defaultVal")?!i.isEmailReg.test(i.$email.val())|i.$email.val()==i.$email.data("defaultVal")?(i.$errorTip.css("lineHeight","23px"),TweenLite.to(i.$errorTip,.3,{opacity:.85,top:66,height:23,onStart:function(){i.$errorTip.css("display","inline")}}),i.$errorTip.text("请正确填写邮箱"),void(i.errorId=3)):$.trim(i.$msg.val()).length<=0||i.$msg.val()==i.$msg.data("defaultVal")?(i.$errorTip.css("lineHeight","90px"),TweenLite.to(i.$errorTip,.3,{opacity:.85,top:99,height:90,onStart:function(){i.$errorTip.css("display","inline")}}),i.$errorTip.text("请正确填写内容"),void(i.errorId=4)):(i.isSending=!0,i.$sendTip.text("留言发送中..."),TweenLite.to(i.$sendTip,.5,{opacity:.85,top:80,onStart:function(){i.$sendTip.css({display:"inline",top:160})}}),$.post("leaveword.php",$("#form1").serialize(),function(t){"success"==t.msg_result?i.$sendTip.text("留言成功!"):i.$sendTip.text("留言失败!"),TweenLite.to(i.$sendTip,.5,{delay:2,opacity:0,top:0,onComplete:function(){i.$sendTip.css({display:"none",top:160}),i.$resetBtn.triggerHandler("click"),i.isSending=!1}})},"json"),void 0):(i.$errorTip.css("lineHeight","23px"),TweenLite.to(i.$errorTip,.3,{opacity:.85,top:33,height:23,onStart:function(){i.$errorTip.css("display","inline")}}),i.$errorTip.text("请正确填写电话"),void(i.errorId=2))}),this.initMsgItem()},i.errorTipDisappear=function(){var t=this;TweenLite.to(this.$errorTip,.5,{opacity:0,onComplete:function(){t.$errorTip.css("display","none")}})},i.initMsgItem=function(){var t=this;this.$msgItem=$("#contact .msgItem"),this.itemPos=[{left:798,top:63,opacity:.9},{left:729,top:104,opacity:.9},{left:852,top:142,opacity:.5},{left:798,top:186,opacity:.9},{left:875,top:240,opacity:.9},{left:742,top:277,opacity:.3},{left:800,top:310,opacity:.9}],this.$msgItem.each(function(i){$(this).css(t.itemPos[i]),$(this).data("isOpen","f"),$(this).data("closeOpacity",t.itemPos[i].opacity),$(this).data("closeW",$(this).width()),$(this).data("closeH",$(this).height()),$(this).data("openOpacity",.95),$(this).data("openW",300),$(this).data("openH",$(this).children(".fullContent").height())}),this.$msgItem.click(function(){if("f"==$(this).data("isOpen")){t.msgItemOpen($(this));var i=t.$msgItem.not($(this));i.each(function(i){"t"==$(this).data("isOpen")&&t.msgItemClose($(this))})}else t.msgItemClose($(this))})},i.msgItemOpen=function(t){var i=t.children(".icon"),e=t.children(".miniContent"),s=t.children(".fullContent");t.data("isOpen","t"),TweenLite.to(t,.5,{opacity:t.data("openOpacity"),width:t.data("openW"),height:t.data("openH")}),TweenLite.to(i,.5,{alpha:0}),TweenLite.to(e,.5,{alpha:0}),TweenLite.to(s,.5,{alpha:1,onStart:function(){s.css("visibility","visible")}}),t.addClass("msgItem_over").removeClass("msgItem_out")},i.msgItemClose=function(t){var i=t.children(".icon"),e=t.children(".miniContent"),s=t.children(".fullContent");t.data("isOpen","f"),TweenLite.to(t,.5,{opacity:t.data("closeOpacity"),width:t.data("closeW"),height:t.data("closeH")}),TweenLite.to(i,.5,{alpha:1}),TweenLite.to(e,.5,{alpha:1}),TweenLite.to(s,.5,{alpha:0,onStart:function(){s.css("visibility","hidden")}}),t.addClass("msgItem_out").removeClass("msgItem_over")},ws.Contact=t}();