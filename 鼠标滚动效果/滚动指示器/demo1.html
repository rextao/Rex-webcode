<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>js实现</title>
    <style>
        .scroll-line {
            position: fixed;
            left: 0;
            top: 0;
            height: 20px;
            background-color: blue;
        }
    </style>
    <script>
        window.addEventListener('scroll',() => {
          const body = document.body;
          const html = document.documentElement;
          const winHeight = window.innerHeight;
          const docHeight = Math.max(
            body.offsetHeight,
            body.scrollHeight,
            html.clientHeight,
            html.offsetHeight,
            html.scrollHeight
          );
          const scrollTop = (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;
          const scrolled = (scrollTop / (docHeight-winHeight))*100;
          const scrollLine = document.querySelector('.scroll-line');
          scrollLine.style.width = scrolled + '%';
        })
    </script>
</head>
<body>
<div class="scroll-line" ></div>
<div style="margin-top: 40px;">
    <h1>js实现主要难点是计算滚动距离</h1>
    <p style="color: red;">很好的解决了指示器最右边是斜的情况</p>
    <p>滚动的距离为（文档的高度 - 可视窗口高度）*100%，用这个百分比设置水平指示器即可</p>
    <p>计算示意图</p>
    <img src="1.gif" alt="">
</div>
<h2>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Beatae, suscipit?</h2>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab dignissimos doloribus eveniet expedita explicabo
    facilis, ipsam iusto magni maxime, minima nisi odit pariatur quam quasi reiciendis repellat sunt vero voluptas!</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquam aperiam aspernatur at doloribus facilis, magni
    natus necessitatibus neque, numquam perspiciatis reprehenderit velit voluptatem voluptates! Autem commodi
    necessitatibus quis quo tempora?</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Iste, optio vitae. Aut beatae dicta et excepturi magni
    obcaecati, perferendis praesentium reiciendis. Delectus exercitationem harum id laudantium libero magni quis
    repellendus.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Commodi consequatur, cupiditate dolores eos fuga ipsa
    libero, maxime nemo neque repellat repellendus sequi similique tempora unde vel veritatis voluptate. Ad,
    expedita?</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Itaque iusto nobis rem tenetur. Atque doloribus eligendi
    enim expedita laudantium maiores officiis quibusdam reiciendis ullam unde! Accusantium exercitationem quibusdam sunt
    tempore.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab dignissimos doloribus eveniet expedita explicabo
    facilis, ipsam iusto magni maxime, minima nisi odit pariatur quam quasi reiciendis repellat sunt vero voluptas!</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquam aperiam aspernatur at doloribus facilis, magni
    natus necessitatibus neque, numquam perspiciatis reprehenderit velit voluptatem voluptates! Autem commodi
    necessitatibus quis quo tempora?</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Iste, optio vitae. Aut beatae dicta et excepturi magni
    obcaecati, perferendis praesentium reiciendis. Delectus exercitationem harum id laudantium libero magni quis
    repellendus.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Commodi consequatur, cupiditate dolores eos fuga ipsa
    libero, maxime nemo neque repellat repellendus sequi similique tempora unde vel veritatis voluptate. Ad,
    expedita?</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab dignissimos doloribus eveniet expedita explicabo
    facilis, ipsam iusto magni maxime, minima nisi odit pariatur quam quasi reiciendis repellat sunt vero voluptas!</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquam aperiam aspernatur at doloribus facilis, magni
    natus necessitatibus neque, numquam perspiciatis reprehenderit velit voluptatem voluptates! Autem commodi
    necessitatibus quis quo tempora?</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Iste, optio vitae. Aut beatae dicta et excepturi magni
    obcaecati, perferendis praesentium reiciendis. Delectus exercitationem harum id laudantium libero magni quis
    repellendus.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Commodi consequatur, cupiditate dolores eos fuga ipsa
    libero, maxime nemo neque repellat repellendus sequi similique tempora unde vel veritatis voluptate. Ad,
    expedita?</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab dignissimos doloribus eveniet expedita explicabo
    facilis, ipsam iusto magni maxime, minima nisi odit pariatur quam quasi reiciendis repellat sunt vero voluptas!</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquam aperiam aspernatur at doloribus facilis, magni
    natus necessitatibus neque, numquam perspiciatis reprehenderit velit voluptatem voluptates! Autem commodi
    necessitatibus quis quo tempora?</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Iste, optio vitae. Aut beatae dicta et excepturi magni
    obcaecati, perferendis praesentium reiciendis. Delectus exercitationem harum id laudantium libero magni quis
    repellendus.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Commodi consequatur, cupiditate dolores eos fuga ipsa
    libero, maxime nemo neque repellat repellendus sequi similique tempora unde vel veritatis voluptate. Ad,
    expedita?</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab dignissimos doloribus eveniet expedita explicabo
    facilis, ipsam iusto magni maxime, minima nisi odit pariatur quam quasi reiciendis repellat sunt vero voluptas!</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquam aperiam aspernatur at doloribus facilis, magni
    natus necessitatibus neque, numquam perspiciatis reprehenderit velit voluptatem voluptates! Autem commodi
    necessitatibus quis quo tempora?</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Iste, optio vitae. Aut beatae dicta et excepturi magni
    obcaecati, perferendis praesentium reiciendis. Delectus exercitationem harum id laudantium libero magni quis
    repellendus.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Commodi consequatur, cupiditate dolores eos fuga ipsa
    libero, maxime nemo neque repellat repellendus sequi similique tempora unde vel veritatis voluptate. Ad,
    expedita?</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab dignissimos doloribus eveniet expedita explicabo
    facilis, ipsam iusto magni maxime, minima nisi odit pariatur quam quasi reiciendis repellat sunt vero voluptas!</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquam aperiam aspernatur at doloribus facilis, magni
    natus necessitatibus neque, numquam perspiciatis reprehenderit velit voluptatem voluptates! Autem commodi
    necessitatibus quis quo tempora?</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Iste, optio vitae. Aut beatae dicta et excepturi magni
    obcaecati, perferendis praesentium reiciendis. Delectus exercitationem harum id laudantium libero magni quis
    repellendus.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Commodi consequatur, cupiditate dolores eos fuga ipsa
    libero, maxime nemo neque repellat repellendus sequi similique tempora unde vel veritatis voluptate. Ad,
    expedita?</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab dignissimos doloribus eveniet expedita explicabo
    facilis, ipsam iusto magni maxime, minima nisi odit pariatur quam quasi reiciendis repellat sunt vero voluptas!</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquam aperiam aspernatur at doloribus facilis, magni
    natus necessitatibus neque, numquam perspiciatis reprehenderit velit voluptatem voluptates! Autem commodi
    necessitatibus quis quo tempora?</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Iste, optio vitae. Aut beatae dicta et excepturi magni
    obcaecati, perferendis praesentium reiciendis. Delectus exercitationem harum id laudantium libero magni quis
    repellendus.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Commodi consequatur, cupiditate dolores eos fuga ipsa
    libero, maxime nemo neque repellat repellendus sequi similique tempora unde vel veritatis voluptate. Ad,
    expedita?</p>

</body>
</html>